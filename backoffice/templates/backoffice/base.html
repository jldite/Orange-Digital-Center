<!DOCTYPE html>
{% load static %}
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Dashboard | Orange Digital Center{% endblock %}</title>

  <!-- Tailwind & Chart.js & FontAwesome -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <!-- Config Tailwind -->
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'orange-primary': '#FF7900',
            'orange-dark':    '#E56E00',
            'orange-light':   '#FF9E42',
            'black-primary':  '#000000',
            'gray-dark':      '#333333',
            'gray-light':     '#F5F5F5',
            'gradient-start': '#FF9E42',
            'gradient-end':   '#FF7900',
            'dark-bg':        '#1E293B',
            'dark-card':      '#334155'
          },
          boxShadow: {
            'card': '0 4px 20px rgba(0, 0, 0, 0.08)',
            'card-hover': '0 8px 25px rgba(0, 0, 0, 0.12)',
            'topbar': '0 2px 10px rgba(0, 0, 0, 0.05)',
            'sidebar': '4px 0 15px rgba(0, 0, 0, 0.05)'
          }
        }
      }
    }
  </script>

  <style>
    /* ... (votre CSS existant) ... */

    /* Nouveaux styles pour le mode sombre plus doux */
    .dark .bg-gray-light {
      background-color: #1E293B; /* Couleur de fond plus douce */
    }
    .dark .bg-white {
      background-color: #334155; /* Couleur des cartes plus douce */
    }
    .dark .text-black-primary {
      color: #E2E8F0; /* Texte principal clair */
    }
    .dark .text-gray-500 {
      color: #94A3B8; /* Texte secondaire doux */
    }
    .dark .border-gray-800 {
      border-color: #475569;
    }
    .dark .bg-gray-50 {
      background-color: #1E293B;
    }
    .dark .bg-gray-100 {
      background-color: #334155;
    }
    .dark .bg-orange-100 {
      background-color: #4a1d00;
    }
    .dark .bg-gray-200 {
      background-color: #2d3748;
    }
    .dark .text-gray-400 {
      color: #a0aec0;
    }
    .dark .bg-gray-800 {
      background-color: #2d3748;
    }
    .dark .hover\:bg-gray-50:hover {
      background-color: #475569;
    }
    .dark .shadow-card {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }
    .dark .stat-card {
      background-color: #334155;
    }
    .dark .chart-container {
      background: linear-gradient(145deg, #334155, #2d3748);
    }
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body class="bg-gray-light flex h-screen dark:bg-dark-bg">
  <!-- Sidebar -->
  {% include 'backoffice/partials/sidebar.html' %}

  <!-- Main Content -->
  <main class="flex-1 flex flex-col overflow-hidden">
    <!-- Top Bar -->
    {% include 'backoffice/partials/topbar.html' %}

    <!-- Dashboard Content -->
    <div class="flex-1 overflow-y-auto p-6 bg-gray-light dark:bg-dark-bg">
      {% block content %}
      {% endblock %}
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Toggle du menu profil
      const profileBtn = document.getElementById('profile-btn');
      const profileMenu = document.getElementById('profile-menu');

      if (profileBtn && profileMenu) {
        profileBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          profileMenu.classList.toggle('hidden');
        });

        // Fermer le menu quand on clique ailleurs
        document.addEventListener('click', (e) => {
          if (!profileMenu.contains(e.target) && !profileBtn.contains(e.target)) {
            profileMenu.classList.add('hidden');
          }
        });
      }

      // Mode sombre
      const themeToggle = document.getElementById('theme-toggle');
      const html = document.documentElement;

      // Vérifier le thème sauvegardé ou la préférence système
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
        html.classList.add('dark');
      }

      if (themeToggle) {
        themeToggle.addEventListener('click', () => {
          html.classList.toggle('dark');
          localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
        });
      }
    });
  </script>

  {% block extra_js %}{% endblock %}
</body>
</html>